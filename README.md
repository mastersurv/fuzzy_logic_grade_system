# Система оценки уровня знаний студентов

Программный модуль для оценки уровня знаний студентов на основе нечеткой логики при выполнении лабораторных работ. Система доступна как в виде консольного приложения, так и в виде Telegram-бота.

## Описание

Система предназначена для автоматизации процесса оценки знаний студентов с использованием аппарата нечеткой логики. Она принимает три входных параметра: качество выполнения работы, точность полученного результата и соблюдение сроков, а затем на основе этих параметров классифицирует студента как "троечника", "хорошиста" или "отличника".

## Функциональные возможности

- Оценка знаний студентов по трем параметрам:
  - Качество выполнения работы (0-10)
  - Точность полученного результата (0-10)
  - Соблюдение сроков (0-10)
- Визуализация функций принадлежности
- Сохранение результатов оценки в базе данных
- Экспорт истории в JSON и CSV форматы
- Просмотр истории оценок
- Тестирование системы на предопределенных сценариях
- Статистика использования (только для администраторов Telegram-бота)

## Алгоритм работы

Система использует алгоритм нечеткого вывода Мамдани для классификации студентов:

1. Фаззификация (перевод четких значений в нечеткие)
2. Применение правил нечеткого вывода
3. Дефаззификация (перевод нечеткого результата в четкий)

## Технический стек

- Python 3.8+
- Библиотеки для нечеткой логики:
  - numpy
  - scikit-fuzzy
  - matplotlib
- Для Telegram-бота:
  - Aiogram 3.0+ (асинхронный фреймворк для Telegram Bot API)
  - SQLAlchemy 2.0+ (ORM для работы с базой данных)
  - PostgreSQL (СУБД для хранения данных)
  - Alembic (инструмент для миграций базы данных)

## Установка и запуск

### Общие требования

1. Клонировать репозиторий:
   ```bash
   git clone <репозиторий>
   cd ai_grade_system
   ```

2. Установить необходимые зависимости:
   ```bash
   pip install -r requirements.txt
   ```

### Консольное приложение

Запустите программу командой:

```bash
python main.py
```

После запуска в консоли появится меню, где вы можете выбрать одно из следующих действий:
1. Оценить знания студента
2. Визуализировать функции принадлежности
3. Показать историю оценок
4. Запустить тесты
0. Выход

### Telegram-бот

1. Создать файл .env со следующим содержимым:
   ```
   # Токен бота Telegram
   BOT_TOKEN=123456789:ABCDEFGHIJKLMNOPQRSTUVWXYZ

   # Уровень логирования (DEBUG, INFO, WARNING, ERROR, CRITICAL)
   LOG_LEVEL=INFO

   # ID администраторов бота (через запятую)
   ADMIN_IDS=123456789,987654321

   # Настройки базы данных
   DB_HOST=localhost
   DB_PORT=5433
   DB_NAME=aigrade
   DB_USER=postgres
   DB_PASS=postgres
   ```

2. Настроить и запустить базу данных PostgreSQL (можно использовать Docker):
   ```bash
   docker-compose up -d
   ```

3. Создать и применить миграции:
   ```bash
   alembic revision --autogenerate -m "Initial migration"
   alembic upgrade head
   ```

4. Запустить бота:
   ```bash
   python bot.py
   ```

## Использование Telegram-бота

1. Найдите бота в Telegram по его имени или перейдите по ссылке.
2. Начните общение с ботом, отправив команду `/start`.
3. Используйте меню или команды для взаимодействия с ботом:
   - `/grade` - Оценить знания студента
   - `/visualize` - Визуализировать функции принадлежности
   - `/history` - Показать историю оценок
   - `/tests` - Запустить тесты
   - `/help` - Показать справку
   - `/stat` - Показать статистику использования (только для администраторов)

## Администраторы Telegram-бота

Администраторы бота имеют доступ к дополнительным функциям:

1. Команда `/stat` для просмотра статистики использования бота.
2. Расширенный список команд в меню бота.

Для назначения администраторов укажите их Telegram ID в переменной `ADMIN_IDS` в файле `.env` через запятую.
Чтобы узнать свой Telegram ID, можно использовать бота @userinfobot.

## Структура проекта

### Основные файлы

- `main.py` - консольное приложение
- `bot.py` - Telegram-бот
- `fuzzy_logic.py` - модуль с реализацией нечеткой логики
- `utils.py` - вспомогательные функции для работы с данными
- `requirements.txt` - список зависимостей
- `docker-compose.yml` - конфигурация Docker для PostgreSQL
- `alembic.ini` - конфигурация Alembic

### Структура бота

```
bot/
├── __init__.py
├── config.py        # Конфигурация бота
├── fuzzy_logic_adapter.py  # Адаптер для работы с нечеткой логикой
├── commands/        # Пакет с обработчиками команд
│   ├── __init__.py
│   ├── start.py     # Обработчик команды /start
│   ├── grade.py     # Обработчик команды /grade
│   ├── visualize.py # Обработчик команды /visualize
│   ├── history.py   # Обработчик команды /history
│   ├── tests.py     # Обработчик команды /tests
│   └── stat.py      # Обработчик команды /stat (для администраторов)
├── callbacks/       # Пакет с обработчиками колбэков
│   ├── __init__.py
│   ├── grade_input.py  # Колбэки для ввода параметров оценки
│   ├── history.py   # Колбэки для работы с историей
│   └── menu.py      # Колбэки для главного меню
├── handlers/        # Пакет с обработчиками сообщений
│   ├── __init__.py
│   └── states.py    # Файл с состояниями FSM
├── keyboards/       # Пакет с клавиатурами
│   ├── __init__.py
│   ├── main_menu.py # Клавиатура главного меню
│   ├── grade_input.py  # Клавиатура для ввода параметров оценки
│   └── history.py   # Клавиатура для просмотра истории
├── middlewares/     # Пакет с промежуточным ПО
│   └── __init__.py
├── utils/           # Пакет с утилитами
│   ├── __init__.py
│   └── commands.py  # Утилиты для настройки команд
└── database/        # Пакет для работы с базой данных
    ├── __init__.py
    ├── database.py  # Функции для работы с базой данных
    ├── models.py    # Модели SQLAlchemy
    └── migrations/  # Миграции базы данных
```

## Лингвистические переменные

- **Качество выполнения**: низкое, среднее, высокое
- **Точность результата**: низкая, средняя, высокая
- **Срок сдачи**: поздно, вовремя, досрочно
- **Оценка**: троечник, хорошист, отличник

## Правила нечеткого вывода

- ЕСЛИ качество = высокое И точность = высокая И срок = досрочно → Оценка = Отличник
- ЕСЛИ качество = высокое И точность = высокая И срок = вовремя → Оценка = Отличник
- ЕСЛИ качество = среднее И точность = средняя И срок = вовремя → Оценка = Хорошист
- ЕСЛИ качество = среднее И точность = высокая И срок = вовремя → Оценка = Хорошист
- ЕСЛИ качество = низкое ИЛИ точность = низкая ИЛИ срок = поздно → Оценка = Троечник
- ЕСЛИ качество = высокое И точность = средняя И срок = вовремя → Оценка = Хорошист
- ЕСЛИ качество = среднее И точность = средняя И срок = досрочно → Оценка = Хорошист

## Примеры тестов

| Качество | Точность | Сроки | Ожидаемый результат |
|----------|----------|-------|---------------------|
| 9        | 9        | 10    | Отличник            |
| 6        | 6        | 6     | Хорошист            |
| 3        | 3        | 2     | Троечник            |
| 5        | 4        | 8     | Хорошист            |
| 1        | 2        | 1     | Троечник            |

## Лицензия

Этот проект распространяется под лицензией MIT. 